---
title: F4-ADS遥控器
categories: [板子]

---

# 【F4-ADS】基于STM32F429VET6和ADS8688的遥控器

## V1.1版本

**更新了以下内容：**

1.电源模块。V1.0 版本采用单节 18650 电池供电，搭载战队现成的单节 18650 升压保护模块。经测试发现该方案存在两个问题：一是模块具备强制升压功能，即便 18650 电池处于过放状态，仍会强制将输出电压抬升至 5V，导致 ADS 芯片无法采集电池真实剩余电量，进而无法实现低压报警功能，存在电池过度放电损坏的风险；二是单节 18650 电池容量有限，持续工作场景下续航能力不足，影响系统连续运行稳定性。为解决上述问题，V1.1版本对电源模块进行迭代优化：采用两节 18650 电池串联供电，提升续航能力与供电稳定性；将电池保护模块与降压模块集成于遥控器，简化外部接线并提升系统集成度；保留 ADS 电压采集功能，通过采集两节电池串联后的真实电压数据，确保低压报警功能可靠实现，有效避免电池过放损坏。

2.有线调试。NRF跟CH340接同一个串口USART1。

3.板子大小。V1.0版本板子大小是15cmx10cm，V1.1版本增加大小到17cmx11cm。

4.新增按键。增加拨轮开关。

5.新增该网页二维码。

## V1.0版本


### 模块说明

F4-ADS的配置如下：

摇杆：PS5 TMR霍尔摇杆

ADC：ADS8688是16位8通道500kspsADC芯片，我们使用其中4个通道采两个摇杆的xy，1个通道采电池电量

MCU：STM32F429VET6

屏幕：ST7789驱动的2寸屏幕

外设：1个NOR FLASH、4个LED、1个4x4矩阵键盘、2个独立按键、1个蜂鸣器、1个typeC+CH340有线调试、1个NRF

![F4-ADS](Picture/ykq1.png)
![F4-ADS](Picture/ykq2.png)

原理图较简单，只说明ADS8688采集电路

通道引脚串联270R电阻，起限流作用，信号和GND间接100nF电容滤波，外接ADR444电压基准芯片为ADS8688提供4.096V基准电压

![ADS8688](Picture/ykq3.png)

PCB大概是15cm x 10cm，为了节约成本画了2层板，大部分电容电阻是0402封装，节省空间。

### IO说明

| 引脚编号 | GPIO |    连接资源    |    连接关系说明    |
| :------: | :--: | :------------: | :----------------: |
|    81    | PD0  |      LED0      |     低电平触发     |
|    82    | PD1  |      LED1      |     低电平触发     |
|    83    | PD2  |      LED2      |     低电平触发     |
|    84    | PD3  |      LED3      |     低电平触发     |
|    80    | PC12 |     蜂鸣器     |     低电平触发     |
|    29    | PA4  |    SPI1_CS     |  与 ADS8688 通信   |
|    30    | PA5  |    SPI1_SCK    |  与 ADS8688 通信   |
|    31    | PA6  |   SPI1_MISO    |  与 ADS8688 通信   |
|    32    | PA7  |   SPI1_MOSI    |  与 ADS8688 通信   |
|    97    | PE0  |     LCD_EN     |      LCD 控制      |
|    98    | PE1  |    LCD_BLK     |      LCD 背光      |
|    1     | PE2  |    LCD_SCK     |      LCD 时钟      |
|    3     | PE4  |     LCD_CS     |      LCD 片选      |
|    5     | PE6  |    LCD_MOSI    |      LCD 数据      |
|    51    | PB12 |    SPI2_CS     | 接 W25Q256 (Flash) |
|    52    | PB13 |    SPI2_SCK    | 接 W25Q256 (Flash) |
|    53    | PB14 |   SPI2_MISO    | 接 W25Q256 (Flash) |
|    54    | PB15 |   SPI2_MOSI    | 接 W25Q256 (Flash) |
|    78    | PA9  |   USART1_TX    |    NRF / CH340     |
|    79    | PA10 |   USART1_RX    |    NRF / CH340     |
|    2     | PE3  |   左摇杆按下   |      按键输入      |
|    77    | PA15 |   右摇杆按下   |      按键输入      |
|    48    | PB11 |   左上角按键   |      按键输入      |
|    47    | PB10 |   右上角按键   |      按键输入      |
|    65    | PC8  | 左上角拨轮开关 |    向下滑IO置高    |
|    66    | PC9  | 左上角拨轮开关 |     按下IO置高     |
|    67    | PA8  | 左上角拨轮开关 |    向上滑IO置高    |
|    38    | PE7  | 右上角拨轮开关 |    向下滑IO置高    |
|    39    | PE8  | 右上角拨轮开关 |     按下IO置高     |
|    40    | PE9  | 右上角拨轮开关 |    向上滑IO置高    |

| **行 \ 列** | **PC0** | **PC1** | **PC2** | **PC3** |
| :---------: | :-----: | :-----: | :-----: | :-----: |
|   **PC4**   |  KEY1   |  KEY2   |  KEY3   |  KEY4   |
|   **PC5**   |  KEY5   |  KEY6   |  KEY7   |  KEY8   |
|   **PC6**   |  KEY9   |  KEY10  |  KEY11  |  KEY12  |
|   **PC7**   |  KEY13  |  KEY14  |  KEY15  |  KEY16  |

| ADS8688**通道** |     **对应功能**     |
| :-------------: | :------------------: |
|      通道0      |       右摇杆 x       |
|      通道1      |       右摇杆 y       |
|      通道2      |       左摇杆 x       |
|      通道3      |       左摇杆 y       |
|      通道4      | 电池电压的一半（4V） |

### 资料

资料包含工程文件、IO说明、外壳.step文件
链接：https://pan.quark.cn/s/e70b1f419f03

